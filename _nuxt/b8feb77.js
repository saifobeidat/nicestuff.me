(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{306:function(t,e,r){"use strict";r.r(e);var o,h=r(302),n=r(154);(o=(o=h)||h)&&!o.__composition_api_installed__&&o.use(n.a);h.version;var l={components:{"vue-drawing-canvas":Object(n.b)({name:"VueDrawingCanvas",props:{strokeType:{type:String,validator:t=>-1!==["dash","line","square","circle","triangle","half_triangle"].indexOf(t),default:()=>"dash"},fillShape:{type:Boolean,default:()=>!1},width:{type:[String,Number],default:()=>600},height:{type:[String,Number],default:()=>400},image:{type:String,default:()=>""},eraser:{type:Boolean,default:()=>!1},color:{type:String,default:()=>"#000000"},lineWidth:{type:Number,default:()=>5},lineCap:{type:String,validator:t=>-1!==["round","square","butt"].indexOf(t),default:()=>"round"},lineJoin:{type:String,validator:t=>-1!==["miter","round","bevel"].indexOf(t),default:()=>"miter"},lock:{type:Boolean,default:()=>!1},styles:{type:[Array,String,Object]},classes:{type:[Array,String,Object]},backgroundColor:{type:String,default:()=>"#FFFFFF"},backgroundImage:{type:String,default:()=>null},watermark:{type:Object,default:()=>null},saveAs:{type:String,validator:t=>-1!==["jpeg","png"].indexOf(t),default:()=>"png"},canvasId:{type:String,default:()=>"VueDrawingCanvas"},initialImage:{type:Array,default:()=>[]},additionalImages:{type:Array,default:()=>[]},outputWidth:{type:Number},outputHeight:{type:Number}},data:()=>({loadedImage:null,drawing:!1,context:null,images:[],strokes:{type:"",from:{x:0,y:0},coordinates:[],color:"",width:"",fill:!1,lineCap:"",lineJoin:""},guides:[],trash:[]}),mounted(){this.setContext(),this.$nextTick((()=>{this.drawInitialImage(),this.drawAdditionalImages()}))},watch:{backgroundImage:function(){this.loadedImage=null}},methods:{async setContext(){let canvas=document.querySelector("#"+this.canvasId);this.context=this.context?this.context:canvas.getContext("2d"),await this.setBackground()},drawInitialImage(){this.initialImage&&this.initialImage.length>0&&(this.images=[].concat(this.images,this.initialImage),this.redraw(!0))},drawAdditionalImages(){if(this.additionalImages&&this.additionalImages.length>0){let canvas=document.querySelector("#"+this.canvasId);this.additionalImages.forEach((t=>{this.drawWatermark(canvas,this.context,t)}))}},clear(){this.context.clearRect(0,0,Number(this.width),Number(this.height))},async setBackground(){this.clear(),this.context.fillStyle=this.backgroundColor,this.context.fillRect(0,0,Number(this.width),Number(this.height)),await this.$nextTick((async()=>{await this.drawBackgroundImage()})),this.save()},async drawBackgroundImage(){if(!this.loadedImage)return new Promise((t=>{if(!this.backgroundImage)return void t();const image=new Image;image.src=this.backgroundImage,image.onload=()=>{this.context.drawImage(image,0,0,Number(this.width),Number(this.height)),this.loadedImage=image,t()}}));this.context.drawImage(this.loadedImage,0,0,Number(this.width),Number(this.height))},getCoordinates(t){let e,r;if(t.touches&&t.touches.length>0){let rect=document.querySelector("#"+this.canvasId).getBoundingClientRect();e=t.touches[0].clientX-rect.left,r=t.touches[0].clientY-rect.top}else e=t.offsetX,r=t.offsetY;return{x:e,y:r}},startDraw(t){if(!this.lock){this.drawing=!0;let e=this.getCoordinates(t);this.strokes={type:this.eraser?"eraser":this.strokeType,from:e,coordinates:[],color:this.eraser?this.backgroundColor:this.color,width:this.lineWidth,fill:!this.eraser&&"dash"!==this.strokeType&&"line"!==this.strokeType&&this.fillShape,lineCap:this.lineCap,lineJoin:this.lineJoin},this.guides=[]}},draw(t){if(this.drawing){this.context||this.setContext();let e=this.getCoordinates(t);if(this.eraser||"dash"===this.strokeType)this.strokes.coordinates.push(e),this.drawShape(this.context,this.strokes,!1);else{switch(this.strokeType){case"line":this.guides=[{x:e.x,y:e.y}];break;case"square":this.guides=[{x:e.x,y:this.strokes.from.y},{x:e.x,y:e.y},{x:this.strokes.from.x,y:e.y},{x:this.strokes.from.x,y:this.strokes.from.y}];break;case"triangle":let t=Math.floor((e.x-this.strokes.from.x)/2)<0?-1*Math.floor((e.x-this.strokes.from.x)/2):Math.floor((e.x-this.strokes.from.x)/2),r=this.strokes.from.x<e.x?this.strokes.from.x+t:this.strokes.from.x-t;this.guides=[{x:e.x,y:this.strokes.from.y},{x:r,y:e.y},{x:this.strokes.from.x,y:this.strokes.from.y}];break;case"half_triangle":this.guides=[{x:e.x,y:this.strokes.from.y},{x:this.strokes.from.x,y:e.y},{x:this.strokes.from.x,y:this.strokes.from.y}];break;case"circle":let o=this.strokes.from.x-e.x<0?-1*(this.strokes.from.x-e.x):this.strokes.from.x-e.x;this.guides=[{x:this.strokes.from.x>e.x?this.strokes.from.x-o:this.strokes.from.x+o,y:this.strokes.from.y},{x:o,y:o}]}this.drawGuide(!0)}}},drawGuide(t){this.redraw(!0),this.$nextTick((()=>{this.context.strokeStyle=this.color,this.context.lineWidth=1,this.context.lineJoin=this.lineJoin,this.context.lineCap=this.lineCap,this.context.beginPath(),this.context.setLineDash([15,15]),"circle"===this.strokes.type?this.context.ellipse(this.guides[0].x,this.guides[0].y,this.guides[1].x,this.guides[1].y,0,0,2*Math.PI):(this.context.moveTo(this.strokes.from.x,this.strokes.from.y),this.guides.forEach((t=>{this.context.lineTo(t.x,t.y)})),t&&this.context.closePath()),this.context.stroke()}))},drawShape(t,e,r){t.strokeStyle=e.color,t.fillStyle=e.color,t.lineWidth=e.width,t.lineJoin=void 0===e.lineJoin?this.lineJoin:e.lineJoin,t.lineCap=void 0===e.lineCap?this.lineCap:e.lineCap,t.beginPath(),t.setLineDash([]),"circle"===e.type?t.ellipse(e.coordinates[0].x,e.coordinates[0].y,e.coordinates[1].x,e.coordinates[1].y,0,0,2*Math.PI):(t.moveTo(e.from.x,e.from.y),e.coordinates.forEach((e=>{t.lineTo(e.x,e.y)})),r&&t.closePath()),e.fill?t.fill():t.stroke()},stopDraw(){this.drawing&&(this.strokes.coordinates=this.guides.length>0?this.guides:this.strokes.coordinates,this.images.push(this.strokes),this.redraw(!0),this.drawing=!1,this.trash=[])},reset(){this.lock||(this.images=[],this.strokes={type:"",coordinates:[],color:"",width:"",fill:!1,lineCap:"",lineJoin:""},this.guides=[],this.trash=[],this.redraw(!0))},undo(){if(!this.lock){let t=this.images.pop();t&&(this.trash.push(t),this.redraw(!0))}},redo(){if(!this.lock){let t=this.trash.pop();t&&(this.images.push(t),this.redraw(!0))}},async redraw(output){output=void 0===output||output,await this.setBackground().then((()=>{this.drawAdditionalImages()})).then((()=>{let t=document.createElement("canvas"),e=t.getContext("2d");t.width=Number(this.width),t.height=Number(this.height),e&&(this.images.forEach((t=>{e&&(e.globalCompositeOperation="eraser"===t.type?"destination-out":"source-over",("circle"!==t.type||"circle"===t.type&&t.coordinates.length>0)&&this.drawShape(e,t,"eraser"!==t.type&&"dash"!==t.type&&"line"!==t.type))})),this.context.drawImage(t,0,0,Number(this.width),Number(this.height)))})).then((()=>{output&&this.save()}))},wrapText(t,text,e,r,o,h){const n=/\s+/g;var l=text.split(/(\r\n|\n\r|\n|\r)+/g).filter((t=>t.length>0));for(let f=0;f<l.length;f++){for(var d=l[f].split(n).filter((t=>t.length>0)),line="",c=0;c<d.length;c++){var m=line+d[c]+" ";t.measureText(m).width>o&&c>0?(this.watermark&&this.watermark.fontStyle&&this.watermark.fontStyle.drawType&&"stroke"===this.watermark.fontStyle.drawType?t.strokeText(line,e,r):t.fillText(line,e,r),line=d[c]+" ",r+=h):line=m}this.watermark&&this.watermark.fontStyle&&this.watermark.fontStyle.drawType&&"stroke"===this.watermark.fontStyle.drawType?t.strokeText(line,e,r):t.fillText(line,e,r),r+=d.length>0?h:0}},save(){let canvas=document.querySelector("#"+this.canvasId);if(this.watermark){let t=document.createElement("canvas"),e=t.getContext("2d");e&&(t.width=Number(this.width),t.height=Number(this.height),e.drawImage(canvas,0,0,Number(this.width),Number(this.height)),this.drawWatermark(t,e,this.watermark))}else{let t=document.createElement("canvas"),e=t.getContext("2d"),r=void 0===this.outputWidth?this.width:this.outputWidth,o=void 0===this.outputHeight?this.height:this.outputHeight;if(t.width=Number(r),t.height=Number(o),e)return e.drawImage(canvas,0,0,Number(r),Number(o)),this.$emit("update:image",t.toDataURL("image/"+this.saveAs,1)),t.toDataURL("image/"+this.saveAs,1)}},drawWatermark(canvas,t,e){if("Image"===e.type){let r=e.imageStyle&&e.imageStyle.width?e.imageStyle.width:Number(this.width),o=e.imageStyle&&e.imageStyle.height?e.imageStyle.height:Number(this.height);const image=new Image;image.src=e.source,image.onload=()=>{e&&t&&t.drawImage(image,e.x,e.y,Number(r),Number(o));let h=document.createElement("canvas"),n=h.getContext("2d"),l=void 0===this.outputWidth?this.width:this.outputWidth,d=void 0===this.outputHeight?this.height:this.outputHeight;if(h.width=Number(l),h.height=Number(d),n)return n.drawImage(canvas,0,0,Number(l),Number(d)),this.$emit("update:image",h.toDataURL("image/"+this.saveAs,1)),h.toDataURL("image/"+this.saveAs,1)}}else if("Text"===e.type){let r=e.fontStyle&&e.fontStyle.font?e.fontStyle.font:"20px serif",o=e.fontStyle&&e.fontStyle.textAlign?e.fontStyle.textAlign:"start",h=e.fontStyle&&e.fontStyle.textBaseline?e.fontStyle.textBaseline:"alphabetic",n=e.fontStyle&&e.fontStyle.color?e.fontStyle.color:"#000000";if(t.font=r,t.textAlign=o,t.textBaseline=h,e.fontStyle&&e.fontStyle.rotate){let r,o;r=e.fontStyle&&e.fontStyle.width?e.x+Math.floor(e.fontStyle.width/2):e.x,o=e.fontStyle&&e.fontStyle.lineHeight?e.y+Math.floor(e.fontStyle.lineHeight/2):e.y,t.translate(r,o),t.rotate(e.fontStyle.rotate*Math.PI/180),t.translate(-1*r,-1*o)}e.fontStyle&&e.fontStyle.drawType&&"stroke"===e.fontStyle.drawType?(t.strokeStyle=e.fontStyle.color,e.fontStyle&&e.fontStyle.width?this.wrapText(t,e.source,e.x,e.y,e.fontStyle.width,e.fontStyle.lineHeight):t.strokeText(e.source,e.x,e.y)):(t.fillStyle=n,e.fontStyle&&e.fontStyle.width?this.wrapText(t,e.source,e.x,e.y,e.fontStyle.width,e.fontStyle.lineHeight):t.fillText(e.source,e.x,e.y));let l=document.createElement("canvas"),d=l.getContext("2d"),c=void 0===this.outputWidth?this.width:this.outputWidth,m=void 0===this.outputHeight?this.height:this.outputHeight;if(l.width=Number(c),l.height=Number(m),d)return d.drawImage(canvas,0,0,Number(c),Number(m)),this.$emit("update:image",l.toDataURL("image/"+this.saveAs,1)),l.toDataURL("image/"+this.saveAs,1)}},isEmpty(){return!(this.images.length>0)},getAllStrokes(){return this.images}},render(){return Object(n.c)("canvas",{attrs:{id:this.canvasId,width:Number(this.width),height:Number(this.height)},style:{touchAction:"none",...this.styles},class:this.classes,on:{mousedown:t=>this.startDraw(t),mousemove:t=>this.draw(t),mouseup:()=>this.stopDraw(),mouseleave:()=>this.stopDraw(),touchstart:t=>this.startDraw(t),touchmove:t=>this.draw(t),touchend:()=>this.stopDraw(),touchleave:()=>this.stopDraw(),touchcancel:()=>this.stopDraw(),pointerdown:t=>this.startDraw(t),pointermove:t=>this.draw(t),pointerup:()=>this.stopDraw(),pointerleave:()=>this.stopDraw(),pointercancel:()=>this.stopDraw()},...this.$props})}})},setup:function(){},head:function(){return{title:this.$t("onlineboard.meta.title"),meta:[{hid:"description",name:"description",content:this.$t("onlineboard.meta.description")}]}},name:"MyComponent",data:function(){return{width:0,height:0}},mounted:function(){this.width=window.innerWidth-30,this.height=window.innerWidth<1e3?400:450}},d=r(57),component=Object(d.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h1",{staticClass:"lg:text-xl font-medium"},[t._v("Whiteboard Drawer")]),t._v(" "),r("div",{staticClass:"mb-1 lg:mb-4"}),t._v(" "),r("div",{staticClass:"border border-slate-200"},[r("vue-drawing-canvas",{ref:"VueCanvasDrawing",attrs:{"line-join":"bevel",height:t.height,width:t.width}})],1),t._v(" "),r("div",{staticClass:"flex mt-2"},[r("button",{staticClass:"flex items-center",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$refs.VueCanvasDrawing.undo()}}},[r("svg",{staticClass:"bi bi-arrow-counterclockwise",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[r("path",{attrs:{"fill-rule":"evenodd",d:"M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2v1z"}}),t._v(" "),r("path",{attrs:{d:"M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466z"}})]),t._v(" "),r("span",[t._v(" "+t._s(t.$t("actions.undo"))+" ")])]),t._v(" "),r("span",{staticClass:"mx-2"}),t._v(" "),r("button",{staticClass:"flex items-center",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$refs.VueCanvasDrawing.redo()}}},[r("svg",{staticClass:"bi bi-arrow-clockwise",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[r("path",{attrs:{"fill-rule":"evenodd",d:"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"}}),t._v(" "),r("path",{attrs:{d:"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"}})]),t._v(" "),r("span",[t._v(" "+t._s(t.$t("actions.redo"))+" ")])])]),t._v(" "),r("br"),t._v(" "),r("br"),t._v(" "),r("h2",[t._v("Website for Notepad Drawer")]),t._v(" "),r("p",{staticClass:"text-xs lg:text-sm text-slate-500"},[t._v("\n    A tool to draw on whiteboard, or sketch on empty paper! . We provide you a\n    free paint tool for your quick drawings online!\n  ")]),t._v(" "),r("p")])}),[],!1,null,null,null);e.default=component.exports}}]);